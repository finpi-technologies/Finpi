<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script>
  // Initialize Pi SDK in sandbox (testnet) mode
  Pi.init({
    version: "2.0",
    sandbox: true
  });

  const payButton = document.getElementById("payWithPi");

  payButton.addEventListener("click", async () => {
    try {
      const payment = await Pi.createPayment({
        amount: 0.001,
        memo: "Finpi Test Transaction",
        metadata: { purpose: "testnet" },
        onReadyForServerApproval: async (paymentId) => {
          console.log("‚úÖ Ready for server approval:", paymentId);
        },
        onReadyForServerCompletion: async (paymentId, txid) => {
          console.log("‚úÖ Payment completed:", paymentId, txid);
          alert("üéâ Testnet Payment Completed!");
        },
        onCancel: (paymentId) => {
          console.warn("üö´ Payment cancelled:", paymentId);
          alert("‚ùå Payment cancelled.");
        },
        onError: (error, payment) => {
          console.error("‚ö†Ô∏è Payment error:", error, payment);
          alert("‚ö†Ô∏è Payment failed. Check console for details.");
        }
      });
    } catch (error) {
      console.error("‚ùå Payment process failed:", error);
      alert("‚ö†Ô∏è Could not start payment. Check console for details.");
    }
  });
</script>
